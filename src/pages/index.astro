---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import RootLayout from "../layouts/Root.astro";
import { formatDate } from "../util";

const blogs = await getCollection("blogs");
---

<RootLayout
  title="Home"
  subtitle="Brook Nash's personal website."
  slug="hello-world"
>
  <section class="flex justify-between">
    <h1 class="dark:text-white">Brook Nash</h1>
    <div class="flex items-center gap-2">
      <p class="text-muted">Software Engineer</p>
      <Image
        class="size-6 rounded-full"
        width="6"
        height="6"
        loading="eager"
        src="/favicon.ico"
        alt="Younger me"
      />
    </div>
  </section>

  <section class="flex justify-center gap-6 *:text-sm *:text-blue-400">
    <a class="flex items-center gap-2" href="https://x.com/brooknullsh">
      <svg
        class="size-4"
        width="44"
        height="44"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M4 4l11.733 16h4.267l-11.733 -16z"></path>
        <path d="M4 20l6.768 -6.768m2.46 -2.46l6.772 -6.772"></path>
      </svg>
      Twitter &#8599
    </a>

    <a class="flex items-center gap-2" href="https://github.com/brooknullsh">
      <svg
        class="size-4"
        width="44"
        height="44"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2
              6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3
              1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403
              5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22
              1.23-.15 1.85v4"
        ></path>
        <path d="M9 18c-4.51 2-5-2-7-2"></path>
      </svg>
      GitHub &#8599
    </a>
  </section>

  <p class="text-center">
    I'm a Software Engineer currently working full-time on very legacy
    architecture in Wales, United Kingdom. Feel free to reach out through my
    social media links if you spot mistakes I've made or just want to talk about
    software.
  </p>

  <section class="flex items-center justify-between">
    <h2>Blogs</h2>
    <p class="text-muted">Ramblings, code snippets and less</p>
  </section>

  <section class="grid grid-cols-[min-content_auto]">
    <h3 class="mr-6 dark:text-white">Published</h3>
    <h3 class="dark:text-white">Title</h3>

    {
      blogs.map(({ id, data }) => {
        const { title, published } = data;
        return (
          <a
            class="group contents *:flex *:h-12 *:items-center *:border-b *:border-neutral-300 dark:*:border-neutral-600"
            href={id}
          >
            <p class="text-muted transition-colors group-hover:text-inherit">
              {formatDate(published, "medium")}
            </p>
            <p>{title}</p>
          </a>
        );
      })
    }
  </section>

  <p class="text-center italic">
    "My main reason for this site in general, even ignoring the blog aspect of
    it, is to store my findings, resources & awful code snippets."
    <br />
    <a class="text-blue-400 not-italic" href="/hello-world">
      Hello, World! &rsaquo;
    </a>
  </p>
</RootLayout>
